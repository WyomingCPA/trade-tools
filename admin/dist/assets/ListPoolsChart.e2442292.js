import{_ as h,r as o,o as l,h as d,n as g,a as x,c as y,d as C,F,w as i,e as r,i as b,t as v}from"./index.06ce08cf.js";import{d as P}from"./debounce.4f3e0d5f.js";import{l as R}from"./index.baba1a11.js";const w={props:["candles","pool_min","pool_max","symbol"],data(){return{chart:null,options:{animationEnabled:!0,theme:"dark1",exportEnabled:!0,title:{text:""},subtitles:[{text:"Weekly Average"}],axisX:{interval:1},axisY:{prefix:"$",yValueFormatString:"####.####",title:"Price in USD",stripLines:[]},toolTip:{content:"Date: {x}<br /><strong>Price:</strong><br />Open: {y[0]}, Close: {y[3]}<br />High: {y[1]}, Low: {y[2]}"},data:[{type:"candlestick",risingColor:"green",fallingColor:"red",xValueFormatString:"DD MMM YYYY HH mm",dataPoints:[]}]},styleOptions:{width:"100%",height:"360px"}}},methods:{chartInstance(t){this.chart=t,this.fetchRows()},fetchRows(){this.loading=!0,this.candles.forEach(t=>{this.options.data[0].dataPoints.push({x:new Date(t.time),y:[t.open,t.high,t.low,t.close]})}),this.chart.data[0].axisY.addTo("stripLines",{value:this.pool_min,label:"min",color:"#FF0000"}),this.chart.data[0].axisY.addTo("stripLines",{value:this.pool_max,label:"max",color:"#00FF00"}),this.chart.title.set("text",this.symbol)}},created(){}};function S(t,e,p,m,n,c){const s=o("CanvasJSChart");return l(),d(s,{options:n.options,style:g(n.styleOptions),onChartRef:c.chartInstance},null,8,["options","style","onChartRef"])}var D=h(w,[["render",S]]);const k={name:"ListPoolsChart",components:{PoolChart:D},data(){const t=[],e="";return{loading:!1,items:t,input:e,filter:e,isDebounceInput:!1,isCustomFilteringFn:!1,filteredCount:t.length,selectedItemsEmitted:[],listPrice:Array,serverParams:{name:""}}},methods:{formatRange(t){return t!=null?t.min+"-"+t.max:"\u041D\u0435 \u0437\u0430\u0434\u0430\u043D\u043E"},filterExact(t){var e;return this.filter===""?!0:((e=t==null?void 0:t.toString)==null?void 0:e.call(t))===this.filter},updateFilter(t){this.filter=t},debouncedUpdateFilter:P(function(t){this.updateFilter(t)},600),filterPrice:function(t){this.filter=t,this.input=t},fetchRows(){let t=this;this.loading=!0,x.request({method:"get",url:"/api/cryptocurrency/list-chart-pools-data",params:this.serverParams,paramsSerializer:e=>R.stringify(e)}).then(e=>{t.items=e.data.list_chart,t.loading=!1}).catch(e=>{console.log(e),t.loading=!1})},resetInfoModal(){this.infoModal.title="",this.infoModal.content=""}},computed:{customFilteringFn(){return this.isCustomFilteringFn?this.filterExact:void 0}},watch:{input(t){this.isDebounceInput?this.debouncedUpdateFilter(t):this.updateFilter(t)}},created(){this.fetchRows()}};function E(t,e,p,m,n,c){const s=o("va-card-title"),u=o("PoolChart"),f=o("va-card-content"),_=o("va-card");return l(!0),y(F,null,C(n.items,a=>(l(),d(_,{key:a.id},{default:i(()=>[r(s,null,{default:i(()=>[b(v(a.symbol),1)]),_:2},1024),r(f,null,{default:i(()=>[r(u,{candles:a.candles,pool_min:a.pool_min,pool_max:a.pool_max,symbol:a.symbol},null,8,["candles","pool_min","pool_max","symbol"])]),_:2},1024)]),_:2},1024))),128)}var I=h(k,[["render",E]]);export{I as default};
