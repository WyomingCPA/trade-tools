import{_ as y,a as d,r as i,o as F,f as w,g as o,h as a,d as l,t as u,k as f}from"./index.66e5bf5b.js";import{d as x}from"./debounce.8595bcdf.js";import{l as C}from"./index.b1f63a46.js";const I={name:"StockFavorite",components:{},data(){const e=[],t="";return{loading:!1,items:e,columns:[{key:"id",sortable:!0},{key:"symbol",sortable:!0},{key:"chart_1h",width:80},{key:"chart_1d",width:80},{key:"pools_range",width:80},{key:"actions",width:80}],input:t,filter:t,isDebounceInput:!1,isCustomFilteringFn:!1,filteredCount:e.length,selectedItemsEmitted:[],listPrice:Array,serverParams:{name:""}}},methods:{formatRange(e){return e!=null?e.min+"-"+e.max:"\u041D\u0435 \u0437\u0430\u0434\u0430\u043D\u043E"},filterExact(e){var t;return this.filter===""?!0:((t=e==null?void 0:e.toString)==null?void 0:t.call(e))===this.filter},updateFilter(e){this.filter=e},debouncedUpdateFilter:x(function(e){this.updateFilter(e)},600),filterPrice:function(e){this.filter=e,this.input=e},fetchRows(){let e=this;this.loading=!0,d.request({method:"get",url:"/api/cryptocurrency/favorites",params:this.serverParams,paramsSerializer:t=>C.stringify(t)}).then(t=>{e.items=t.data.models,e.loading=!1}).catch(t=>{console.log(t),e.loading=!1})},resetInfoModal(){this.infoModal.title="",this.infoModal.content=""},unfavorite:function(e,t){var r=this;this.loading=!0,d.get("/sanctum/csrf-cookie").then(_=>{d.post("/api/cryptocurrency/unfavorite",{selRows:r.selectedItemsEmitted}).then(s=>{s.status?(console.log("\u0412\u044B\u0437\u0432\u0430\u043B\u0438 \u0430\u043B\u0435\u0440\u0442"),this.$vaToast.init({message:"Success",color:"success"}),this.fetchRows(),this.loading=!1):(console.log("\u041D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442"),console.log(s.status),this.loading=!1)})})}},computed:{customFilteringFn(){return this.isCustomFilteringFn?this.filterExact:void 0}},watch:{input(e){this.isDebounceInput?this.debouncedUpdateFilter(e):this.updateFilter(e)}},created(){this.fetchRows()}},R={class:"grid md:grid-cols-2 gap-6 mb-6"},S={class:"row"},E={class:"col"},V=f(" \u0423\u0431\u0440\u0430\u0442\u044C \u0438\u0437 \u0438\u0437\u0431\u0440\u0430\u043D\u043D\u043E\u0433\u043E "),N=["href"],P=["href"],B=["href"],M=["href"],U=f(" Number of filtered items: ");function D(e,t,r,_,s,c){const h=i("va-input"),m=i("va-button"),p=i("va-data-table"),g=i("va-chip"),v=i("va-alert"),b=i("va-card-content"),k=i("va-card");return F(),w(k,null,{default:o(()=>[a(b,null,{default:o(()=>[l("div",R,[a(h,{modelValue:s.input,"onUpdate:modelValue":t[0]||(t[0]=n=>s.input=n),placeholder:"Filter...",class:"w-full"},null,8,["modelValue"])]),l("div",S,[l("div",E,[a(m,{onClick:c.unfavorite},{default:o(()=>[V]),_:1},8,["onClick"])])]),a(p,{items:s.items,columns:s.columns,filter:s.filter,"filter-method":c.customFilteringFn,onFiltered:t[1]||(t[1]=n=>s.filteredCount=n.items.length),loading:s.loading,selectable:"","selected-color":"warning",onSelectionChange:t[2]||(t[2]=n=>s.selectedItemsEmitted=n.currentSelectedItems)},{"cell(name)":o(({rowData:n})=>[l("a",{class:"link",target:"_blank",href:"https://www.tinkoff.ru/invest/stocks/"+n.ticker},u(n.name),9,N)]),"cell(chart_1h)":o(({rowData:n})=>[l("a",{target:"_blank",class:"btn btn-primary",href:"chart-1h/"+n.id},"\u0413\u0440\u0430\u0444\u0438\u043A",8,P)]),"cell(chart_1d)":o(({rowData:n})=>[l("a",{target:"_blank",class:"btn btn-primary",href:"chart-1d/"+n.id},"\u0413\u0440\u0430\u0444\u0438\u043A",8,B)]),"cell(pools_range)":o(({rowData:n})=>[l("span",null,u(c.formatRange(n.pools_range)),1)]),"cell(actions)":o(({rowData:n})=>[l("a",{target:"_blank",href:"edit/"+n.id},"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C",8,M)]),_:1},8,["items","columns","filter","filter-method","loading"]),a(v,{class:"!mt-6",color:"info",outline:""},{default:o(()=>[U,a(g,null,{default:o(()=>[f(u(s.filteredCount),1)]),_:1})]),_:1})]),_:1})]),_:1})}var A=y(I,[["render",D],["__scopeId","data-v-7c386494"]]);export{A as default};
