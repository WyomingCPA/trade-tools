import{_ as P,a as o,r as s,o as b,c as C,e as n,w as c,n as _,F as f,b as d,i as y}from"./index.4c600f0b.js";const M={name:"group-create",components:{},data(){return{value:[10,25],loading:!1,minRange:0,maxRange:0,currentPrice:0,percentMaxChange:0,percentMinChange:0,chart:null,options:{animationEnabled:!0,theme:"dark1",exportEnabled:!0,title:{text:""},subtitles:[{text:"Weekly Average"}],axisX:{interval:1},axisY:{prefix:"$",yValueFormatString:"####.####",title:"Price in USD",stripLines:[{value:2600,label:"empty",color:"#FF0000"},{value:2700,label:"empty",color:"#00FF00"},{value:0,label:"empty",color:"#0800ff"}]},toolTip:{content:"Date: {x}<br /><strong>Price:</strong><br />Open: {y[0]}, Close: {y[3]}<br />High: {y[1]}, Low: {y[2]}"},data:[{type:"candlestick",xValueFormatString:"DD MMM YYYY",dataPoints:[]}]},styleOptions:{width:"100%",height:"360px"}}},computed:{minSlide:function(){},maxSlide:function(){let e=parseInt(this.maxRange)+500;return this.calculateTest(),e}},methods:{inputChange(){this.value=[this.minRange,this.maxRange]},sliderChange(){this.minRange=this.value[0],this.maxRange=this.value[1],console.log(this.value)},processTrackLabel(e,t){return t===0?`min ${e}$`:`max ${e}$`},calculateTest(){this.percentMaxChange=(this.maxRange-this.currentPrice)/this.currentPrice*100,this.percentMinChange=(this.currentPrice-this.minRange)/this.currentPrice*100},calculate(e){e.percentMaxChange=(e.maxRange-e.currentPrice)/e.currentPrice*100,e.percentMinChange=(e.currentPrice-e.minRange)/e.currentPrice*100,this.chart.data[0].axisY.stripLines[0].set("value",e.minRange),this.chart.data[0].axisY.stripLines[0].set("label",e.percentMinChange),this.chart.data[0].axisY.stripLines[1].set("value",e.maxRange),this.chart.data[0].axisY.stripLines[1].set("label",e.percentMaxChange),this.chart.data[0].axisY.stripLines[2].set("value",e.currentPrice),this.chart.data[0].axisY.stripLines[2].set("label",e.currentPrice),this.chart.render(),console.log(e.percentMaxChange),console.log(e.percentMinChange)},chartInstance(e){this.chart=e,this.fetchRows()},fetchRows(){let e=this;this.loading=!0,o.request({method:"get",url:"/api/liquidity-pools/chart-1h/"+this.$route.params.id,params:this.serverParams,paramsSerializer:t=>qs.stringify(t)}).then(t=>{t.data.candles.forEach(r=>{this.options.data[0].dataPoints.push({x:new Date(r.time),y:[r.open,r.high,r.low,r.close]})}),this.chart.data[0].axisY.stripLines[0].set("value",t.data.pool_min),this.chart.data[0].axisY.stripLines[0].set("label",t.data.pool_min),this.chart.data[0].axisY.stripLines[1].set("value",t.data.pool_max),this.chart.data[0].axisY.stripLines[1].set("label",t.data.pool_max),this.chart.data[0].axisY.stripLines[2].set("value",e.currentPrice),this.chart.data[0].axisY.stripLines[2].set("label",e.currentPrice),this.chart.title.set("text",t.data.symbol),this.minRange=t.data.pool_min,this.maxRange=t.data.pool_max,this.value=[this.minRange,this.maxRange],console.log(this.value),e.percentMaxChange=(e.maxRange-e.currentPrice)/e.currentPrice*100,e.percentMinChange=(e.currentPrice-e.minRange)/e.currentPrice*100,this.chart.render(),e.loading=!1}).catch(t=>{console.log(t),e.loading=!1})},getData(){let e=this;o.get("/api/cryptocurrency/edit/"+this.$route.params.id).then(function(t){e.minRange=t.data.model.min,e.maxRange=t.data.model.max,e.currentPrice=t.data.last_candle,console.log(t.data.model.min)}).catch(function(t){console.error(t)})},async update(){let e=this;this.loading=!0,o.get("/sanctum/csrf-cookie").then(t=>{o.post("/api/cryptocurrency/update",{id:this.$route.params.id,minRange:e.minRange,maxRange:e.maxRange,currentPrice:e.currentPrice}).then(r=>{r.status?(this.$vaToast.init({message:"Pool \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D",color:"success"}),console.log("Pool \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D"),e.loading=!1,this.percentMaxChange=(e.maxRange-e.currentPrice)/e.currentPrice*100,this.percentMinChange=(e.currentPrice-e.minRange)/e.currentPrice*100,e.chart.data[0].axisY.stripLines[0].set("value",e.minRange),e.chart.data[0].axisY.stripLines[0].set("label",e.percentMinChange),e.chart.data[0].axisY.stripLines[1].set("value",e.maxRange),e.chart.data[0].axisY.stripLines[1].set("label",e.percentMaxChange),e.chart.data[0].axisY.stripLines[2].set("value",e.currentPrice),e.chart.data[0].axisY.stripLines[2].set("label",e.currentPrice),this.chart.render()):(console.log("\u041D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442"),console.log(r.status))}).catch(function(r){console.log(t),console.error(r)})})}},mounted:function(){this.getData()}},V={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 items-end"},Y=y(" \u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C "),L={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 items-end"};function S(e,t,r,k,a,l){const g=s("VaSlider"),h=s("va-card-content"),u=s("VaInput"),p=s("va-button"),x=s("va-form"),m=s("VaBadge"),v=s("va-card"),R=s("CanvasJSChart");return b(),C(f,null,[n(v,null,{default:c(()=>[n(h,null,{default:c(()=>[n(g,{min:l.minSlide,max:l.maxSlide,modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=i=>a.value=i),class:"mb-6",range:"","track-label-visible":"","track-label":l.processTrackLabel,onChange:t[1]||(t[1]=i=>l.sliderChange()),step:.1},null,8,["min","max","modelValue","track-label","step"])]),_:1}),n(h,null,{default:c(()=>[d("div",V,[n(x,{class:"flex flex-col gap-6",ref:"formRef"},{default:c(()=>[n(u,{onChange:t[2]||(t[2]=i=>l.inputChange()),modelValue:a.minRange,"onUpdate:modelValue":t[3]||(t[3]=i=>a.minRange=i),class:"mb-6",label:"Min Range",placeholder:"min"},null,8,["modelValue"]),n(u,{modelValue:a.maxRange,"onUpdate:modelValue":t[4]||(t[4]=i=>a.maxRange=i),class:"mb-6",label:"Max Range",placeholder:"max"},null,8,["modelValue"]),n(u,{modelValue:a.currentPrice,"onUpdate:modelValue":t[5]||(t[5]=i=>a.currentPrice=i),class:"mb-6",label:"Balance",placeholder:"Current Price"},null,8,["modelValue"]),n(p,{onClick:t[6]||(t[6]=i=>l.update())},{default:c(()=>[Y]),_:1})]),_:1},512)]),d("div",L,[n(m,{text:a.percentMinChange,color:"danger",class:"mr-2"},null,8,["text"]),n(m,{text:a.percentMaxChange,color:"success",class:"mr-2"},null,8,["text"])])]),_:1})]),_:1}),n(R,{options:a.options,style:_(a.styleOptions),onChartRef:l.chartInstance},null,8,["options","style","onChartRef"])],64)}var F=P(M,[["render",S]]);export{F as default};
