import{_ as A,a as i,r as n,o as c,c as h,b as u,F as D,d as I,t as d,e as t,p as N,f as F,g as L,w as l,h as C,i as s,j as T}from"./index.4c600f0b.js";const z={name:"mini-console",data(){return{timer:null,events:[]}},methods:{getConsoleEvent(){let e=this;this.loading=!0,i.get("/api/console/last-events-console").then(function(o){o.data.events.map(function(a,$){var v=e.events.some(function(k){return k.id===a.id});v||(console.log(a),a.data=JSON.parse(a.data),e.events.unshift(a))})}).catch(function(o){console.error(o)})}},mounted:function(){this.timer=setInterval(()=>{this.getConsoleEvent()},5e3)},beforeDestroy(){clearInterval(this.timer)}},O=e=>(N("data-v-f8bb0b1c"),e=e(),F(),e),j={class:"va-table-responsive"},q={class:"va-table va-table--hoverable"},J=O(()=>u("thead",null,[u("tr",null,[u("th",null,"Id"),u("th",null,"Message"),u("th",null,"Country"),u("th",null,"Time")])],-1));function P(e,o,a,$,v,k){const b=n("VaBadge");return c(),h("div",j,[u("table",q,[J,u("tbody",null,[(c(!0),h(D,null,I(v.events,f=>(c(),h("tr",{key:f.id},[u("td",null,d(f.id),1),u("td",null,d(f.message),1),u("td",null,d(f.created_at),1),u("td",null,[t(b,{text:f.id,color:e.danger},null,8,["text","color"])])]))),128))])])])}var U=A(z,[["render",P],["__scopeId","data-v-f8bb0b1c"]]);const G=L({components:{MiniConsole:U},data(){return{today_open_orders:{type:Number},week_open_orders:{type:Number},all_logs_count:{type:Number},month_open_orders:{type:Number},count_all_candles:{type:Number},candles_last_ago:{type:String},count_all_orders:{type:Number},orders_last_ago:{type:String},all_scripts:[],dataUrl:{type:String},loading:!1,id_order:0,serverParams:{},items:[]}},methods:{async deleteAllLog(){let e=this;this.loading=!0,i.get("/sanctum/csrf-cookie").then(o=>{i.post("/api/dashboard/delete-all-logs",{}).then(a=>{a.status?(e.loading=!1,this.$vaToast.init("\u0410\u0440\u0445\u0438\u0432 \u043B\u043E\u0433\u043E\u0432 \u0443\u0434\u0430\u043B\u0435\u043D!"),this.fetchData()):(console.log("\u041D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442"),console.log(a.status),e.loading=!1)}).catch(function(a){console.log(o),console.error(a)})})},async deleteAllCandles(){let e=this;this.loading=!0,i.get("/sanctum/csrf-cookie").then(o=>{i.post("/api/dashboard/delete-all-candles",{}).then(a=>{a.status?(e.loading=!1,this.fetchData()):(console.log("\u041D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442"),console.log(a.status),e.loading=!1)}).catch(function(a){console.log(o),console.error(a)})})},async deleteAllOrders(){let e=this;this.loading=!0,i.get("/sanctum/csrf-cookie").then(o=>{i.post("/api/dashboard/delete-all-orders",{}).then(a=>{a.status?(e.loading=!1,this.fetchData()):(console.log("\u041D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442"),console.log(a.status),e.loading=!1)}).catch(function(a){console.log(o),console.error(a)})})},fetchData(){let e=this;this.loading=!0,i.get("/api/dashboard/index").then(function(o){e.today_open_orders=o.data.today_open_orders,e.week_open_orders=o.data.week_open_orders,e.month_open_orders=o.data.month_open_orders,e.count_all_candles=o.data.count_all_candles,e.candles_last_ago=o.data.candles_last_ago,e.count_all_orders=o.data.count_all_orders,e.orders_last_ago=o.data.orders_last_ago,e.all_logs_count=o.data.all_logs_count,e.all_scripts=o.data.all_scripts,e.loading=!1,console.log(o.data.count_all_candles)}).catch(function(o){console.error(o)})},getStatusBadgeColor(e){return console.log(e),e=="empty"?"primary":e==1?"success":e==0?"danger":e=="nothing"?"info":""}},created(){this.fetchData()}}),x=e=>(N("data-v-6e88def6"),e=e(),F(),e),H={class:"row row-equal"},K={class:"flex xl6 xs12 lg6"},Q={class:"col-md-4 grid-margin stretch-card"},R=s("Trade Log"),W={class:"flex xl6 xs12 lg6"},X={class:"col-md-4 grid-margin stretch-card"},Y=s("\u0421\u0435\u0440\u0432\u0438\u0441"),Z=s(" \u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F "),ee=s(" \u041E\u0431\u0449\u0435\u0435 \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0441\u0432\u0435\u0447\u0435\u0439 "),te=s(" \u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u0441\u0435 "),le=s(" \u041E\u0431\u0449\u0435\u0435 \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u043E\u0440\u0434\u0435\u0440\u043E\u0432 "),ue=s(" \u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u0441\u0435 "),oe=s(" \u041E\u0431\u0449\u0435\u0435 \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0437\u0430\u043F\u0438\u0441\u0435\u0439 \u043B\u043E\u0433\u0430 "),ae=s(" \u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u0441\u0435 "),se={class:"row"},ne={class:"flex xs12 sm6 md6"},_e={class:"va-h2 ma-0"},de=x(()=>u("p",{class:"no-wrap"},"\u0421\u0434\u0435\u043B\u043A\u0438 \u0417\u0430 \u0421\u0435\u0433\u043E\u0434\u043D\u044F",-1)),ce={class:"flex xs12 sm6 md6"},re={class:"va-h2 ma-0"},ie=x(()=>u("p",{class:"no-wrap"},"\u0421\u0434\u0435\u043B\u043A\u0438 \u0417\u0430 \u041D\u0435\u0434\u0435\u043B\u044E",-1)),fe={class:"flex xs12 sm6 md6"},he={class:"va-h2 ma-0"},pe=x(()=>u("p",{class:"no-wrap"},"\u0421\u0434\u0435\u043B\u043A\u0438 \u0417\u0430 \u041C\u0435\u0441\u044F\u0446",-1));function ge(e,o,a,$,v,k){const b=n("va-card-title"),f=n("MiniConsole"),p=n("va-card-content"),g=n("va-card"),r=n("va-list-item-label"),_=n("va-list-item-section"),w=n("va-badge"),y=n("va-list-item"),S=n("va-list"),V=n("va-list-label"),B=n("va-icon"),E=n("va-button");return c(),h(D,null,[u("div",H,[u("div",K,[u("div",Q,[t(g,null,{default:l(()=>[t(b,null,{default:l(()=>[R]),_:1}),t(p,null,{default:l(()=>[t(f)]),_:1})]),_:1})])]),u("div",W,[u("div",X,[t(g,null,{default:l(()=>[t(b,null,{default:l(()=>[Y]),_:1}),t(p,null,{default:l(()=>[t(S,null,{default:l(()=>[(c(!0),h(D,null,I(e.all_scripts,(m,M)=>(c(),C(y,{key:M,class:"list__item"},{default:l(()=>[t(_,null,{default:l(()=>[t(r,null,{default:l(()=>[s(d(m.name),1)]),_:2},1024),t(r,{caption:""},{default:l(()=>[s(" Last update "+d(m.updated_at),1)]),_:2},1024)]),_:2},1024),t(_,{icon:""},{default:l(()=>[m.is_run==1?(c(),C(w,{key:0,text:"\u0420\u0430\u0431\u043E\u0442\u0430\u0435\u0442",color:e.getStatusBadgeColor(m.is_run),class:"mr-2"},null,8,["color"])):(c(),C(w,{key:1,text:"\u041D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442",color:e.getStatusBadgeColor(m.is_run),class:"mr-2"},null,8,["color"]))]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(S,null,{default:l(()=>[t(V,null,{default:l(()=>[Z]),_:1}),t(y,{class:"list__item"},{default:l(()=>[t(_,null,{default:l(()=>[t(B,{size:44,name:"bar_chart_4_bars",color:"background-tertiary"})]),_:1}),t(_,null,{default:l(()=>[t(r,null,{default:l(()=>[ee]),_:1}),t(r,{caption:""},{default:l(()=>[s(d(e.count_all_candles),1)]),_:1})]),_:1}),t(_,{icon:""},{default:l(()=>[t(E,{onClick:e.deleteAllCandles,color:"danger",gradient:"",class:"mr-6 mb-2"},{default:l(()=>[te]),_:1},8,["onClick"])]),_:1})]),_:1}),t(y,{class:"list__item"},{default:l(()=>[t(_,null,{default:l(()=>[t(B,{size:44,name:"done",color:"background-tertiary"})]),_:1}),t(_,null,{default:l(()=>[t(r,null,{default:l(()=>[le]),_:1}),t(r,{caption:""},{default:l(()=>[s(d(e.count_all_orders),1)]),_:1})]),_:1}),t(_,{icon:""},{default:l(()=>[t(E,{color:"danger",gradient:"",class:"mr-6 mb-2"},{default:l(()=>[ue]),_:1})]),_:1})]),_:1}),t(y,{class:"list__item"},{default:l(()=>[t(_,null,{default:l(()=>[t(B,{size:44,name:"va-delete",color:"background-tertiary"})]),_:1}),t(_,null,{default:l(()=>[t(r,null,{default:l(()=>[oe]),_:1}),t(r,{caption:""},{default:l(()=>[s(d(e.all_logs_count),1)]),_:1})]),_:1}),t(_,{icon:""},{default:l(()=>[t(E,{onClick:e.deleteAllLog,color:"danger",gradient:"",class:"mr-6 mb-2"},{default:l(()=>[ae]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])])]),u("div",se,[u("div",ne,[t(g,null,{default:l(()=>[t(p,null,{default:l(()=>[u("h2",_e,d(e.today_open_orders),1),de]),_:1})]),_:1})]),u("div",ce,[t(g,null,{default:l(()=>[t(p,null,{default:l(()=>[u("h2",re,d(e.week_open_orders),1),ie]),_:1})]),_:1})]),u("div",fe,[t(g,null,{default:l(()=>[t(p,null,{default:l(()=>[u("h2",he,d(e.month_open_orders),1),pe]),_:1})]),_:1})])])],64)}var me=A(G,[["render",ge],["__scopeId","data-v-6e88def6"]]);const ve={class:"dashboard"},ye=L({__name:"Dashboard",setup(e){return T(),(o,a)=>(c(),h("div",ve,[t(me)]))}});export{ye as default};
