(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4230df14"],{"930d":function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"row mb-3"},[s("div",{staticClass:"col-12"},[s("b-card",{attrs:{title:"Панель действий"}},[s("div",{staticClass:"mr-auto text-sm-right pt-2 pt-sm-0"},[s("b-button",{staticClass:"mr-2",attrs:{type:"submit",variant:"success"},on:{click:e.getAllFutures}},[s("span",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}]},[e._v("Обновить список фьючерсов")]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"spinner-border spinner-border-sm",attrs:{role:"status"}},[s("span",{staticClass:"sr-only"},[e._v("Loading...")])])])],1)])],1)]),s("vue-good-table",{attrs:{isLoading:e.loading,theme:"nocturnal",columns:e.columns,rows:e.items,"sort-options":{enabled:!0},"line-numbers":!0,"pagination-options":{enabled:!0,mode:"records",perPage:100,position:"top",perPageDropdown:[200,300,500],dropdownAllowAll:!1,setCurrentPage:1,nextLabel:"next",prevLabel:"prev",rowsPerPageLabel:"Rows per page",ofLabel:"of",pageLabel:"page",allLabel:"All"},"search-options":{enabled:!0},"select-options":{enabled:!0}},on:{"on-selected-rows-change":e.selectionChanged},scopedSlots:e._u([{key:"table-row",fn:function(t){return["name"===t.column.field?s("span",[s("a",{attrs:{target:"_blank",href:"https://www.tinkoff.ru/invest/etfs/"+t.row.ticker}},[e._v(e._s(t.row.name))])]):"ticker"===t.column.field?s("span",[e._v(" "+e._s(t.row.ticker)+" ")]):"nominal"===t.column.field?s("span",[e._v(" "+e._s(t.row.nominal)+" ")]):"currency"===t.column.field?s("span",[e._v(" "+e._s(t.row.currency)+" ")]):"last_price"===t.column.field?s("span",[e._v(" "+e._s(t.row.last_price)+" ")]):e._e()]}}])},[s("div",{attrs:{slot:"selected-row-actions"},slot:"selected-row-actions"},[s("button",{on:{click:e.favorite}},[e._v("Favorite")])])])],1)},o=[],a=(s("d3b7"),s("96cf"),s("bc3a")),l=s.n(a),i=(s("dac4"),{name:"futures-all",data:function(){return{loading:!1,items:[{name:"-",ticker:"-",currency:"-",last_price:"-"}],columns:[{label:"Name",field:"name"},{label:"ticker",field:"ticker"},{label:"Figi",field:"figi"},{label:"Class Code",field:"class_code"},{label:"Lot",field:"lot"},{label:"Валюта",field:"currency"}]}},methods:{fetchData:function(){var e=this;this.loading=!0,l.a.get("/api/futures/all").then((function(t){e.items=t.data.futures,console.log(t.data.futures),e.loading=!1})).catch((function(t){console.error(t),e.loading=!1}))},getAllFutures:function(){var e,t=this;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:e=this,this.loading=!0,l.a.get("/sanctum/csrf-cookie").then((function(s){l.a.post("/api/futures/get-all-futures",{}).then((function(s){s.status?(e.loading=!1,t.fetchData()):(console.log("Не работает"),console.log(s.status),e.loading=!1)})).catch((function(e){console.log(s),console.error(e)}))}));case 3:case"end":return s.stop()}}),null,this)},selectionChanged:function(e){this.selRows=e.selectedRows},favorite:function(e,t){var s=this,n=this;this.loading=!0,l.a.get("/sanctum/csrf-cookie").then((function(e){l.a.post("/api/futures/favorite",{selRows:s.selRows}).then((function(e){e.status?(console.log("Вызвали алерт"),s.fetchData(),n.loading=!1):(console.log("Не работает"),console.log(e.status),n.loading=!1)}))}))}},mounted:function(){this.fetchData()}}),r=i,c=s("2877"),u=Object(c["a"])(r,n,o,!1,null,null,null);t["default"]=u.exports},dac4:function(e,t,s){}}]);
//# sourceMappingURL=chunk-4230df14.155daae4.js.map