(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b35a547"],{"8a1e":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"tables"},[t._m(0),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12 grid-margin stretch-card"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("h4",{staticClass:"card-title"}),a("b-table",{attrs:{responsive:"",items:t.items,fields:t.fields},scopedSlots:t._u([{key:"cell(actions)",fn:function(e){return[a("b-button",{staticClass:"mr-1",attrs:{size:"sm"},on:{click:function(a){return t.setBalance(e.item,e.index,a.target)}}},[t._v(" Задать баланс ")]),a("b-button",{staticClass:"mr-1",attrs:{size:"sm"},on:{click:function(a){return t.deleteCheck(e.item,e.index,a.target)}}},[t._v(" Удалить счет ")])]}}])},[a("template",{slot:"bottom-row"},[a("td",[t._v("Всего")]),a("td"),a("td",[t._v(t._s(t.totalBalance))]),a("td"),a("td",[t._v(t._s(t.totalDifference))]),a("td"),a("td",[t._v(t._s(t.totalCalculateSummPrecent))])])],2),a("b-modal",{ref:"my-modal",attrs:{id:t.infoModal.id,title:t.infoModal.title},on:{hide:t.resetInfoModal,ok:t.handleOk}},[a("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[a("b-form-group",{attrs:{label:"Новый баланс","label-for":"name-input","invalid-feedback":"Name is required"}},[a("b-form-input",{attrs:{id:"name-input",required:""},model:{value:t.countBalance,callback:function(e){t.countBalance=e},expression:"countBalance"}})],1)],1)])],1)])])])])},c=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-header"},[a("h3",{staticClass:"page-title"},[t._v("Bootstrap Table")]),a("nav",{attrs:{"aria-label":"breadcrumb"}},[a("ol",{staticClass:"breadcrumb"},[a("li",{staticClass:"breadcrumb-item"},[a("a",{attrs:{href:"javascript:void(0);"}},[t._v("Table")])]),a("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v("Все группы")])])])])}],l=(a("b0c0"),a("d3b7"),a("159b"),a("96cf"),a("bc3a")),o=a.n(l),i={name:"check-all",components:{},data:function(){return{countBalance:0,idCheck:"",items:Array,infoModal:{id:"info-modal",title:"",content:""},fields:[{key:"name",label:"Название инструмента",sortable:!0},{key:"type",label:"Тип инструмента",sortable:!0},{key:"balances.balance",label:"Баланс",sortable:!0},{key:"limit",label:"Лимит",sortable:!0},{key:"difference_limit",label:"Разница",sortable:!0},{key:"precent",label:"Проценты",sortable:!0},{key:"precent_month_calculate",label:"Проценты за месяц",sortable:!0},{key:"balances.updated_at",label:"Последнее обновление",sortable:!0},{key:"actions",label:"Actions"}]}},methods:{handleOk:function(t){t.preventDefault(),this.handleSubmit()},setBalance:function(t,e,a){this.infoModal.title=t.name,this.idCheck=t.id,this.$root.$emit("bv::show::modal",this.infoModal.id,a)},deleteCheck:function(t,e,a){var n=this;this.idCheck=t.id;var c=this;o.a.get("/sanctum/csrf-cookie").then((function(t){o.a.post("/api/finance/delete",{id_check:c.idCheck}).then((function(t){t.status?(console.log("Вызвали алерт"),n.getCheck()):(console.log("Не работает"),console.log(t.status))})).catch((function(e){console.log(t),console.error(e)}))}))},getCheck:function(){var t=this;o.a.get("/api/finance").then((function(e){t.items=e.data.checks,console.log(e.data.checks)})).catch((function(t){console.error(t)}))},resetInfoModal:function(){this.infoModal.title="",this.infoModal.content=""},handleSubmit:function(){var t,e=this;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:t=this,o.a.get("/sanctum/csrf-cookie").then((function(a){o.a.post("/api/finance/set-balance",{set_balance:e.countBalance,id_check:t.idCheck}).then((function(t){t.status?(console.log("Вызвали алерт"),e.getCheck(),e.$refs["my-modal"].hide()):(console.log("Не работает"),console.log(t.status))})).catch((function(t){console.log(a),console.error(t)}))}));case 2:case"end":return a.stop()}}),null,this)}},mounted:function(){this.getCheck()},computed:{totalBalance:function(){var t=0;return this.items.forEach((function(e,a){null!=e.balances&&"credit"!=e.type&&(t+=e.balances["balance"])})),t},totalDifference:function(){var t=0;return this.items.forEach((function(e,a){console.log(e),null!=e.difference_limit&&(t+=e.difference_limit)})),t},totalCalculateSummPrecent:function(){var t=0;return this.items.forEach((function(e,a){console.log(e),null!=e.precent_month_calculate&&(t+=e.precent_month_calculate)})),t}}},s=i,r=a("2877"),u=Object(r["a"])(s,n,c,!1,null,null,null);e["default"]=u.exports},b0c0:function(t,e,a){var n=a("83ab"),c=a("9bf2").f,l=Function.prototype,o=l.toString,i=/^\s*function ([^ (]*)/,s="name";!n||s in l||c(l,s,{configurable:!0,get:function(){try{return o.call(this).match(i)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-3b35a547.7ff2ebc3.js.map