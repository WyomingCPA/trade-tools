(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0466a0c6"],{5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var n=a("1d80"),s=a("5899"),o="["+s+"]",r=RegExp("^"+o+o+"*"),i=RegExp(o+o+"*$"),c=function(e){return function(t){var a=String(n(t));return 1&e&&(a=a.replace(r,"")),2&e&&(a=a.replace(i,"")),a}};e.exports={start:c(1),end:c(2),trim:c(3)}},7156:function(e,t,a){var n=a("861d"),s=a("d2bb");e.exports=function(e,t,a){var o,r;return s&&"function"==typeof(o=t.constructor)&&o!==a&&n(r=o.prototype)&&r!==a.prototype&&s(e,r),e}},"930d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col-12"},[a("b-card",{attrs:{title:"Панель действий"}},[a("div",{staticClass:"mr-auto text-sm-right pt-2 pt-sm-0"},[a("b-button",{staticClass:"mr-2",attrs:{type:"submit",variant:"success"},on:{click:e.getAllFutures}},[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}]},[e._v("Обновить список фьючерсов")]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"spinner-border spinner-border-sm",attrs:{role:"status"}},[a("span",{staticClass:"sr-only"},[e._v("Loading...")])])])],1)])],1)]),a("vue-good-table",{attrs:{isLoading:e.loading,totalRows:e.count,theme:"nocturnal",columns:e.columns,rows:e.items,"sort-options":{enabled:!0},"line-numbers":!0,"pagination-options":{enabled:!0,mode:"records",perPage:20,position:"top",perPageDropdown:null,dropdownAllowAll:!1,setCurrentPage:1,nextLabel:"next",prevLabel:"prev",rowsPerPageLabel:"Rows per page",ofLabel:"of",pageLabel:"page",allLabel:"All",chunk:5},"search-options":{enabled:!0},"select-options":{enabled:!0}},on:{"on-page-change":e.onPageChange,"on-per-page-change":e.onPerPageChange,"on-search":e.onSearch,"on-selected-rows-change":e.selectionChanged},scopedSlots:e._u([{key:"table-row",fn:function(t){return["name"===t.column.field?a("span",[a("a",{attrs:{target:"_blank",href:"https://www.tinkoff.ru/invest/etfs/"+t.row.ticker}},[e._v(e._s(t.row.name))])]):"ticker"===t.column.field?a("span",[e._v(" "+e._s(t.row.ticker)+" ")]):"nominal"===t.column.field?a("span",[e._v(" "+e._s(t.row.nominal)+" ")]):"currency"===t.column.field?a("span",[e._v(" "+e._s(t.row.currency)+" ")]):"last_price"===t.column.field?a("span",[e._v(" "+e._s(t.row.last_price)+" ")]):e._e()]}}])},[a("div",{attrs:{slot:"selected-row-actions"},slot:"selected-row-actions"},[a("button",{on:{click:e.favorite}},[e._v("Favorite")])])])],1)},s=[],o=(a("a9e3"),a("d3b7"),a("96cf"),a("bc3a")),r=a.n(o),i=(a("dac4"),a("4328")),c={name:"futures-all",data:function(){return{loading:!1,count:{type:Number},serverParams:{name:""},items:[{name:"-",ticker:"-",currency:"-",last_price:"-"}],columns:[{label:"Name",field:"name"},{label:"ticker",field:"ticker"},{label:"Figi",field:"figi"},{label:"Class Code",field:"class_code"},{label:"Lot",field:"lot"},{label:"Валюта",field:"currency"}]}},methods:{fetchData:function(){var e=this;this.loading=!0,r.a.request({method:"get",url:"/api/futures/all",params:this.serverParams,paramsSerializer:function(e){return i.stringify(e)}}).then((function(t){e.items=t.data.futures,e.count=t.data.count,e.loading=!1,console.log("test")})).catch((function(t){console.log(t),e.loading=!1}))},getAllFutures:function(){var e,t=this;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:e=this,this.loading=!0,r.a.get("/sanctum/csrf-cookie").then((function(a){r.a.post("/api/futures/get-all-futures",{}).then((function(a){a.status?(e.loading=!1,t.fetchData()):(console.log("Не работает"),console.log(a.status),e.loading=!1)})).catch((function(e){console.log(a),console.error(e)}))}));case 3:case"end":return a.stop()}}),null,this)},updateParams:function(e){this.serverParams=Object.assign({},this.serverParams,e)},onPageChange:function(e){this.updateParams({page:e.currentPage}),this.fetchData()},onSearch:function(e){this.updateParams({name:e}),this.fetchData(),this.loading=!1},onPerPageChange:function(e){this.updateParams({perPage:e.currentPerPage}),this.fetchData()},selectionChanged:function(e){this.selRows=e.selectedRows},favorite:function(e,t){var a=this,n=this;this.loading=!0,r.a.get("/sanctum/csrf-cookie").then((function(e){r.a.post("/api/futures/favorite",{selRows:a.selRows}).then((function(e){e.status?(console.log("Вызвали алерт"),a.fetchData(),n.loading=!1):(console.log("Не работает"),console.log(e.status),n.loading=!1)}))}))}},mounted:function(){this.fetchData()}},l=c,u=a("2877"),f=Object(u["a"])(l,n,s,!1,null,null,null);t["default"]=f.exports},a9e3:function(e,t,a){"use strict";var n=a("83ab"),s=a("da84"),o=a("94ca"),r=a("6eeb"),i=a("5135"),c=a("c6b6"),l=a("7156"),u=a("c04e"),f=a("d039"),d=a("7c73"),p=a("241c").f,g=a("06cf").f,h=a("9bf2").f,m=a("58a8").trim,v="Number",b=s[v],w=b.prototype,_=c(d(w))==v,P=function(e){var t,a,n,s,o,r,i,c,l=u(e,!1);if("string"==typeof l&&l.length>2)if(l=m(l),t=l.charCodeAt(0),43===t||45===t){if(a=l.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:n=2,s=49;break;case 79:case 111:n=8,s=55;break;default:return+l}for(o=l.slice(2),r=o.length,i=0;i<r;i++)if(c=o.charCodeAt(i),c<48||c>s)return NaN;return parseInt(o,n)}return+l};if(o(v,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var N,k=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof k&&(_?f((function(){w.valueOf.call(a)})):c(a)!=v)?l(new b(P(t)),a,k):P(t)},C=n?p(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;C.length>I;I++)i(b,N=C[I])&&!i(k,N)&&h(k,N,g(b,N));k.prototype=w,w.constructor=k,r(s,v,k)}}}]);
//# sourceMappingURL=chunk-0466a0c6.acb4e9ea.js.map