(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-af22794e"],{ceb1:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("vue-good-table",{attrs:{isLoading:e.loading,theme:"nocturnal",columns:e.columns,rows:e.items,"sort-options":{enabled:!0},"line-numbers":!0,"pagination-options":{enabled:!0,mode:"records",perPage:100,position:"top",perPageDropdown:[200,300,500],dropdownAllowAll:!1,setCurrentPage:1,nextLabel:"next",prevLabel:"prev",rowsPerPageLabel:"Rows per page",ofLabel:"of",pageLabel:"page",allLabel:"All"},"search-options":{enabled:!0},"select-options":{enabled:!0}},on:{"on-selected-rows-change":e.selectionChanged},scopedSlots:e._u([{key:"table-row",fn:function(t){return["name"===t.column.field?n("span",[n("a",{attrs:{target:"_blank",href:"https://www.tinkoff.ru/invest/stocks/"+t.row.ticker}},[e._v(e._s(t.row.name))])]):"ticker"===t.column.field?n("span",[e._v(" "+e._s(t.row.ticker)+" ")]):"nominal"===t.column.field?n("span",[e._v(" "+e._s(t.row.nominal)+" ")]):"currency"===t.column.field?n("span",[e._v(" "+e._s(t.row.currency)+" ")]):"last_price"===t.column.field?n("span",[e._v(" "+e._s(t.row.last_price)+" ")]):"adx"===t.column.field?n("span",[e._v(" "+e._s(t.row.adx)+" ")]):"tutci"===t.column.field?n("span",[n("a",{staticClass:"btn btn-primary",attrs:{target:"_blank",href:"/stock/indicator-tutci/"+t.row.id}},[e._v(e._s(t.row.average15day))])]):"action"===t.column.field?n("span",[n("a",{staticClass:"btn btn-primary",attrs:{target:"_blank",href:"action/"+t.row.id}},[e._v("Перейти")])]):e._e()]}}])},[n("template",{slot:"loadingContent"}),n("div",{attrs:{slot:"selected-row-actions"},slot:"selected-row-actions"},[n("button",{on:{click:e.unfavorite}},[e._v("Убрать из избранного")])])],2)],1)},a=[],s=(n("dac4"),n("bc3a")),l=n.n(s),i={name:"stock-favorite",data:function(){return{loading:!1,items:[],columns:[{label:"Name",field:"name"},{label:"Figi",field:"figi"},{label:"ticker",field:"ticker"},{label:"Валюта",field:"currency"},{label:"AVG",field:"average15day",type:"number"},{label:"TUTCI",field:"tutci"},{label:"Action",field:"action"}]}},methods:{selectionChanged:function(e){this.selRows=e.selectedRows},unfavorite:function(e,t){var n=this;this.loading=!0,l.a.get("/sanctum/csrf-cookie").then((function(e){l.a.post("/api/stock/unfavorite",{selRows:n.selRows}).then((function(e){e.status?(console.log("Вызвали алерт"),n.fetchRows(),n.loading=!1):(console.log("Не работает"),console.log(e.status),n.loading=!1)}))}))},fetchRows:function(){var e=this;this.loading=!0,l.a.request({method:"get",url:"/api/stock/favorites",params:this.serverParams,paramsSerializer:function(e){return qs.stringify(e)}}).then((function(t){e.items=t.data.stocks,e.loading=!1})).catch((function(t){console.log(t),e.loading=!1}))}},created:function(){this.fetchRows()}},r=i,c=n("2877"),d=Object(c["a"])(r,o,a,!1,null,null,null);t["default"]=d.exports},dac4:function(e,t,n){}}]);
//# sourceMappingURL=chunk-af22794e.aa077b50.js.map