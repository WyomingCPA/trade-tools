(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a92f343"],{1148:function(t,e,n){"use strict";var a=n("a691"),i=n("1d80");t.exports="".repeat||function(t){var e=String(i(this)),n="",o=a(t);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},"408a":function(t,e,n){var a=n("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=a(t))throw TypeError("Incorrect invocation");return+t}},"8a1e":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"tables"},[t._m(0),n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-12 grid-margin stretch-card"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("h4",{staticClass:"card-title"}),n("b-table",{attrs:{responsive:"",items:t.items,fields:t.fields},scopedSlots:t._u([{key:"cell(actions)",fn:function(e){return[n("b-button",{staticClass:"mr-1",attrs:{size:"sm"},on:{click:function(n){return t.setBalance(e.item,e.index,n.target)}}},[t._v(" Задать баланс ")]),n("b-button",{staticClass:"mr-1",attrs:{size:"sm"},on:{click:function(n){return t.deleteCheck(e.item,e.index,n.target)}}},[t._v(" Удалить счет ")])]}}])},[n("template",{slot:"bottom-row"},[n("td",[t._v("Всего")]),n("td"),n("td",[t._v(t._s(t.totalBalance))]),n("td"),n("td",[t._v(t._s(t.totalDifference))]),n("td"),n("td",[t._v(t._s(t.totalCalculateSummPrecent))]),n("td",[t._v(t._s(t.overAllRatio))])])],2),n("b-modal",{ref:"my-modal",attrs:{id:t.infoModal.id,title:t.infoModal.title},on:{hide:t.resetInfoModal,ok:t.handleOk}},[n("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[n("b-form-group",{attrs:{label:"Новый баланс","label-for":"name-input","invalid-feedback":"Name is required"}},[n("b-form-input",{attrs:{id:"name-input",required:""},model:{value:t.countBalance,callback:function(e){t.countBalance=e},expression:"countBalance"}})],1)],1)])],1)])])])])},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-header"},[n("h3",{staticClass:"page-title"},[t._v("Bootstrap Table")]),n("nav",{attrs:{"aria-label":"breadcrumb"}},[n("ol",{staticClass:"breadcrumb"},[n("li",{staticClass:"breadcrumb-item"},[n("a",{attrs:{href:"javascript:void(0);"}},[t._v("Table")])]),n("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v("Все группы")])])])])}],o=(n("b0c0"),n("b680"),n("d3b7"),n("159b"),n("96cf"),n("bc3a")),c=n.n(o),l={name:"check-all",components:{},data:function(){return{countBalance:0,idCheck:"",items:Array,infoModal:{id:"info-modal",title:"",content:""},fields:[{key:"name",label:"Название инструмента",sortable:!0},{key:"type",label:"Тип инструмента",sortable:!0},{key:"balances.balance",label:"Баланс",sortable:!0},{key:"limit",label:"Лимит",sortable:!0},{key:"difference_limit",label:"Разница",sortable:!0},{key:"precent",label:"%",sortable:!0},{key:"precent_month_calculate",label:"% monthly",sortable:!0},{key:"ratio",label:"ratio",sortable:!0},{key:"balances.updated_at",label:"Последнее обновление",sortable:!0},{key:"actions",label:"Actions"}]}},methods:{handleOk:function(t){t.preventDefault(),this.handleSubmit()},setBalance:function(t,e,n){this.infoModal.title=t.name,this.idCheck=t.id,this.$root.$emit("bv::show::modal",this.infoModal.id,n)},deleteCheck:function(t,e,n){var a=this;this.idCheck=t.id;var i=this;c.a.get("/sanctum/csrf-cookie").then((function(t){c.a.post("/api/finance/delete",{id_check:i.idCheck}).then((function(t){t.status?(console.log("Вызвали алерт"),a.getCheck()):(console.log("Не работает"),console.log(t.status))})).catch((function(e){console.log(t),console.error(e)}))}))},getCheck:function(){var t=this;c.a.get("/api/finance").then((function(e){t.items=e.data.checks,console.log(e.data.checks)})).catch((function(t){console.error(t)}))},resetInfoModal:function(){this.infoModal.title="",this.infoModal.content=""},handleSubmit:function(){var t,e=this;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:t=this,c.a.get("/sanctum/csrf-cookie").then((function(n){c.a.post("/api/finance/set-balance",{set_balance:e.countBalance,id_check:t.idCheck}).then((function(t){t.status?(console.log("Вызвали алерт"),e.getCheck(),e.$refs["my-modal"].hide()):(console.log("Не работает"),console.log(t.status))})).catch((function(t){console.log(n),console.error(t)}))}));case 2:case"end":return n.stop()}}),null,this)}},mounted:function(){this.getCheck()},computed:{totalBalance:function(){var t=0;return this.items.forEach((function(e,n){null!=e.balances&&"credit"!=e.type&&(t+=e.balances["balance"])})),t},totalDifference:function(){var t=0;return this.items.forEach((function(e,n){console.log(e),null!=e.difference_limit&&(t+=e.difference_limit)})),t},totalCalculateSummPrecent:function(){var t=0;return this.items.forEach((function(e,n){console.log(e),null!=e.precent_month_calculate&&(t+=e.precent_month_calculate)})),t},overAllRatio:function(){var t=0,e=0;if(this.items.forEach((function(n,a){console.log(n),0!=n.limit&&(e+=n.balances.balance,t+=n.limit)})),0!=t){var n=e/t*100;return n.toFixed(2)}return" "}}},r=l,s=n("2877"),u=Object(s["a"])(r,a,i,!1,null,null,null);e["default"]=u.exports},b0c0:function(t,e,n){var a=n("83ab"),i=n("9bf2").f,o=Function.prototype,c=o.toString,l=/^\s*function ([^ (]*)/,r="name";!a||r in o||i(o,r,{configurable:!0,get:function(){try{return c.call(this).match(l)[1]}catch(t){return""}}})},b680:function(t,e,n){"use strict";var a=n("23e7"),i=n("a691"),o=n("408a"),c=n("1148"),l=n("d039"),r=1..toFixed,s=Math.floor,u=function(t,e,n){return 0===e?n:e%2===1?u(t,e-1,n*t):u(t*t,e/2,n)},f=function(t){var e=0,n=t;while(n>=4096)e+=12,n/=4096;while(n>=2)e+=1,n/=2;return e},d=r&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!l((function(){r.call({})}));a({target:"Number",proto:!0,forced:d},{toFixed:function(t){var e,n,a,l,r=o(this),d=i(t),h=[0,0,0,0,0,0],b="",m="0",v=function(t,e){var n=-1,a=e;while(++n<6)a+=t*h[n],h[n]=a%1e7,a=s(a/1e7)},p=function(t){var e=6,n=0;while(--e>=0)n+=h[e],h[e]=s(n/t),n=n%t*1e7},g=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==h[t]){var n=String(h[t]);e=""===e?n:e+c.call("0",7-n.length)+n}return e};if(d<0||d>20)throw RangeError("Incorrect fraction digits");if(r!=r)return"NaN";if(r<=-1e21||r>=1e21)return String(r);if(r<0&&(b="-",r=-r),r>1e-21)if(e=f(r*u(2,69,1))-69,n=e<0?r*u(2,-e,1):r/u(2,e,1),n*=4503599627370496,e=52-e,e>0){v(0,n),a=d;while(a>=7)v(1e7,0),a-=7;v(u(10,a,1),0),a=e-1;while(a>=23)p(1<<23),a-=23;p(1<<a),v(1,1),p(2),m=g()}else v(0,n),v(1<<-e,0),m=g()+c.call("0",d);return d>0?(l=m.length,m=b+(l<=d?"0."+c.call("0",d-l)+m:m.slice(0,l-d)+"."+m.slice(l-d))):m=b+m,m}})}}]);
//# sourceMappingURL=chunk-2a92f343.34cb3580.js.map